!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.PaymentGateway=n():e.PaymentGateway=n()}(this,()=>(()=>{"use strict";var e={56(e,n,t){e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72(e){var n=[];function t(e){for(var t=-1,a=0;a<n.length;a++)if(n[a].identifier===e){t=a;break}return t}function a(e,a){for(var r={},i=[],s=0;s<e.length;s++){var d=e[s],c=a.base?d[0]+a.base:d[0],l=r[c]||0,A="".concat(c," ").concat(l);r[c]=l+1;var p=t(A),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var u=o(m,a);a.byIndex=s,n.splice(s,0,{identifier:A,updater:u,references:1})}i.push(A)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var r=a(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var s=t(r[i]);n[s].references--}for(var d=a(e,o),c=0;c<r.length;c++){var l=t(r[c]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}r=d}}},113(e){e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",a=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),a&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),a&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,a,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);a&&i[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},354(e){e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),r="/*# ".concat(o," */");return[n].concat([r]).join("\n")}return[n].join("\n")}},540(e){e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},570(e,n,t){t.d(n,{A:()=>s});var a=t(354),o=t.n(a),r=t(314),i=t.n(r)()(o());i.push([e.id,'#payment-gateway-modal[data-test-id="payment-modal"] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(15, 23, 42, 0.55);\n  z-index: 9999;\n  animation: fadeIn 180ms ease-out;\n}\n\n#payment-gateway-modal .modal-overlay {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\n#payment-gateway-modal .modal-content {\n  position: relative;\n  width: min(480px, 92vw);\n  height: min(640px, 88vh);\n  background: #fff;\n  border-radius: 14px;\n  box-shadow: 0 18px 48px rgba(0,0,0,0.18);\n  overflow: hidden;\n  transform: translateY(12px);\n  animation: slideUp 200ms ease-out;\n}\n\n#payment-gateway-modal iframe[data-test-id="payment-iframe"] {\n  border: none;\n  width: 100%;\n  height: 100%;\n}\n\n#payment-gateway-modal .close-button[data-test-id="close-modal-button"] {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: #0f172a;\n  color: #fff;\n  border: none;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 18px;\n  line-height: 32px;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { transform: translateY(24px); }\n  to { transform: translateY(0); }\n}\n\n@media (max-width: 640px) {\n  #payment-gateway-modal .modal-content {\n    width: 96vw;\n    height: 90vh;\n    border-radius: 10px;\n  }\n}\n',"",{version:3,sources:["webpack://./src/sdk/styles.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,kCAAkC;EAClC,aAAa;EACb,gCAAgC;AAClC;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,uBAAuB;EACvB,wBAAwB;EACxB,gBAAgB;EAChB,mBAAmB;EACnB,wCAAwC;EACxC,gBAAgB;EAChB,2BAA2B;EAC3B,iCAAiC;AACnC;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,mBAAmB;EACnB,WAAW;EACX,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,OAAO,UAAU,EAAE;EACnB,KAAK,UAAU,EAAE;AACnB;;AAEA;EACE,OAAO,2BAA2B,EAAE;EACpC,KAAK,wBAAwB,EAAE;AACjC;;AAEA;EACE;IACE,WAAW;IACX,YAAY;IACZ,mBAAmB;EACrB;AACF",sourcesContent:['#payment-gateway-modal[data-test-id="payment-modal"] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(15, 23, 42, 0.55);\n  z-index: 9999;\n  animation: fadeIn 180ms ease-out;\n}\n\n#payment-gateway-modal .modal-overlay {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\n#payment-gateway-modal .modal-content {\n  position: relative;\n  width: min(480px, 92vw);\n  height: min(640px, 88vh);\n  background: #fff;\n  border-radius: 14px;\n  box-shadow: 0 18px 48px rgba(0,0,0,0.18);\n  overflow: hidden;\n  transform: translateY(12px);\n  animation: slideUp 200ms ease-out;\n}\n\n#payment-gateway-modal iframe[data-test-id="payment-iframe"] {\n  border: none;\n  width: 100%;\n  height: 100%;\n}\n\n#payment-gateway-modal .close-button[data-test-id="close-modal-button"] {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: #0f172a;\n  color: #fff;\n  border: none;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 18px;\n  line-height: 32px;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { transform: translateY(24px); }\n  to { transform: translateY(0); }\n}\n\n@media (max-width: 640px) {\n  #payment-gateway-modal .modal-content {\n    width: 96vw;\n    height: 90vh;\n    border-radius: 10px;\n  }\n}\n'],sourceRoot:""}]);const s=i},659(e){var n={};e.exports=function(e,t){var a=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},825(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,o&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(a,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={id:a,exports:{}};return e[a](r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nc=void 0;var a={};t.r(a),t.d(a,{default:()=>v});var o=t(72),r=t.n(o),i=t(825),s=t.n(i),d=t(659),c=t.n(d),l=t(56),A=t.n(l),p=t(540),m=t.n(p),u=t(113),f=t.n(u),h=t(570),y={};function C(){const e=document.getElementById("payment-gateway-modal");e&&e.parentNode&&e.parentNode.removeChild(e)}y.styleTagTransform=f(),y.setAttributes=A(),y.insert=c().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=m(),r()(h.A,y),h.A&&h.A.locals&&h.A.locals;const g=/^https?:\/\//;class E{constructor({apiKey:e,checkoutBaseUrl:n,onSuccess:t,onFailure:a,onClose:o}={}){if(!e)throw new Error("apiKey is required");if(!n||!g.test(n))throw new Error("checkoutBaseUrl must be a valid http/https URL");const r=n.replace(/\/$/,""),i=new URL(r);this.apiKey=e,this.checkoutBaseUrl=r,this.checkoutOrigin=i.origin,this.onSuccess=t,this.onFailure=a,this.onClose=o,this.modalOpen=!1,this.messageHandler=this.handleMessage.bind(this)}open(e={}){if(this.modalOpen)return;const n=e.token;if(!n)throw new Error("token is required");!function({iframeSrc:e,onClose:n}){const t=document.getElementById("payment-gateway-modal");t&&t.remove();const a=document.createElement("div");a.id="payment-gateway-modal",a.setAttribute("data-test-id","payment-modal");const o=document.createElement("div");o.className="modal-content";const r=document.createElement("iframe");r.src=e,r.setAttribute("data-test-id","payment-iframe"),r.allow="payment;clipboard-read;clipboard-write",o.appendChild(r);const i=document.createElement("button");i.className="close-button",i.setAttribute("data-test-id","close-modal-button"),i.innerText="x",i.onclick=()=>{C(),n&&n()},o.appendChild(i);const s=document.createElement("div");s.className="modal-overlay",s.appendChild(o),a.appendChild(s),document.body.appendChild(a)}({iframeSrc:`${this.checkoutBaseUrl}/checkout?token=${encodeURIComponent(n)}&key=${encodeURIComponent(this.apiKey)}`,onClose:this.handleClose.bind(this)}),this.modalOpen=!0,window.addEventListener("message",this.messageHandler)}close(){this.modalOpen&&(this.cleanup(),this.handleClose())}handleClose(){this.onClose&&this.onClose()}handleMessage(e){if(e.origin!==this.checkoutOrigin)return;const{type:n,payload:t}=e.data||{};if(n)switch(n){case"payment_success":this.onSuccess&&this.onSuccess(t),this.cleanup();break;case"payment_failed":this.onFailure&&this.onFailure(t),this.cleanup();break;case"payment_closed":this.cleanup(),this.onClose&&this.onClose()}}cleanup(){C(),window.removeEventListener("message",this.messageHandler),this.modalOpen=!1}}"undefined"!=typeof window&&(window.PaymentGateway=E);const v=E;return a})());
//# sourceMappingURL=checkout.js.map